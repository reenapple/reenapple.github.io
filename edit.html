<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="styles.css" type="text/css">
        <link rel="stylesheet" href="editcss.css" type="text/css">
        
		<script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script type="text/javascript" src="myscript.js"></script>
        <script type="text/javascript" src="editscript.js"></script>

        <link rel="icon" href="images/bar-icon.png">
        <title>
            Reena Riguera
        </title>
    </head>

    <body>
        <header class="display">
            <nav>
                <ul>
                    <li><a href="#home">Home</a></li>
                    <li><a href="#work">Works</a></li>
                    <li><a href="#education">Education</a></li>
                    <li><a href="#organization">Organization</a></li>
                    <li><a href="#about-me">About Me</a></li>
                </ul>
            </nav>
        </header>


        <section id="home" class="section-home display">
            <span id="name">REENA<br>RIGUERA.</span>
            <div class="header-links">
                <div class="perlink github-link">
                    <div class="gitop"></div>
                    <div class="gibot"></div>
                </div>
                <div class="perlink twitter-link">
                    <div class="twtop"></div>
                    <div class="twbot"></div>
                </div>
                <div class="perlink linkedin-link">
                    <div class="litop"></div>
                    <div class="libot"></div>
                </div>
            </div>
        </section>
        
        <section id="work" class="section-works display">
            <div>
                <div class="home-buttons">
                    <div class="button-white" id="add-w">ADD NEW WORK</div>
                    <div class="button-orange" id="delete-w">DELETE EXISTING WORK</div>
                </div>
                <span class = "headertext">WORKS</span>
                <div class = "headertextcontainer">
                    <div class="headertext-real orange">WORKS</div>
                    <div class="zigzag-white"></div>
                </div>
                <div class="work"></div>
            </div>
        </section>

        <section id="education" class="section-educations display">
            <div>
                <div class="home-buttons">
                    <div class="button-white" id="add-edu">ADD NEW EDUCATION</div>
                    <div class="button-orange" id="delete-edu">DELETE EXISTING EDUCATION</div>
                </div>
                <span class = "headertext orange">EDUCATION</span>
                <div class = "headertextcontainer">
                    <div class="headertext-real">EDUCATION</div>
                    <div class="zigzag-orange"></div>
                </div>
                <div class="edu-grid">
                    <div class=edu-year>
                        <div class="education-years"></div>
                    </div>
                    <div class="education-content"></div>
                </div>
            </div>
        </section>

        <section id="organization" class="section-organizations display">
            <div>
                <div class="home-buttons">
                    <div class="button-white" id="add-org">ADD NEW ORGANIZATION</div>
                    <div class="button-orange" id="delete-org">DELETE EXISTING ORGANIZATION</div>
                </div>
                <span class = "headertext">ORGANIZATION</span>
                <div class = "headertextcontainer">
                    <div class="headertext-real orange">ORGANIZATION</div>
                    <div class="zigzag-white"></div>
                </div>
                <div class="organization"></div>
            </div>
        </section>

        <section id="about-me" class="section-about-me display">
            <div class="unskew">
                <div class="home-buttons">
                    <div class="button-white" id="edit-others">EDIT ABOUT ME & CONTACT LINKS</div>
                </div>
                <div class="about-grid">
                    <div class="headertext-about black">ABOUT ME</div>
                    <div class="about-me"></div>
                    <div class="footer-links">
                        <div class="perlink github-link">
                            <div class="gitop"></div>
                            <div class="f-gibot"></div>
                        </div>
                        <div class="perlink twitter-link">
                            <div class="twtop"></div>
                            <div class="f-twbot"></div>
                        </div>
                        <div class="perlink linkedin-link">
                            <div class="litop"></div>
                            <div class="f-libot"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>






        <div class="pop popuplogin">
            <div class="pop-grid">
                <div class="pop-content">
                    <div class="pop-content-text">LOGIN</div>
                    <form id="login">
                        <div class="pop-desc">Email:</div>
                        <input type="email" id="email" placeholder="email"> 
                        <div class="pop-desc">Password:</div>
                        <input type="password" id="password" placeholder="password"> 
                    </form> 
                    <div class="buttons">
                        <span class="button-yes" id="loginsubmit">Login</span>
                    </div>
                </div>
                <div class="zigzag-pop"></div>
            </div>
        </div>

        <div class="pop popupadd-w">
            <div class="pop-grid">
                <div class="pop-content">
                    <div class="pop-content-text">ADD NEW WORK</div>
                    <form id="add-w">
                        <div class="pop-desc">Name:</div>
                        <input type="text" id="w-name" placeholder="name"> 
                        <div class="pop-desc">Year created:</div>
                        <input type="number" id="w-year-created" placeholder="year created"> 
                        <div class="pop-desc">Language:</div>
                        <input type="text" id="w-language" placeholder="language"> 
                        <div class="pop-desc">Description:</div>
                        <textarea id="w-desc" placeholder="description"></textarea>
                        <div class="pop-desc">Image URL: <span class="pop-tiny">(optional)</span></div>
                        <input type="text" id="w-photo" placeholder="image url (optional)"> 
                    </form>
                    <div class="buttons">
                        <span class="button-yes" id="add-w-submit">Add</span>
                        <span class="button-no" id="add-w-cancel">Cancel</span>
                    </div>
                </div>
                <div class="zigzag-pop"></div>
            </div>
        </div>

        <div class="pop popupadd-edu">
            <div class="pop-grid">
                <div class="pop-content">
                    <div class="pop-content-text">ADD NEW EDUCATION</div>
                    <form id="add-edu">
                        <div class="pop-desc">Degree: <span class="pop-tiny">(optional)</span></div>
                        <input type="text" id="edu-degree" placeholder="degree (optional)"> 
                        <div class="pop-desc">School:</div>
                        <input type="text" id="edu-school" placeholder="school"> 
                        <div class="pop-desc">Type:</div>
                        <input type="text" id="edu-type" placeholder="type"> 
                        <div class="pop-desc">Year started:</div>
                        <input type="number" id="edu-year-start" placeholder="year started"> 
                        <div class="pop-desc">Year ended:</div>
                        <input type="number" id="edu-year-end" placeholder="year ended"> 
                    </form>
                    <div class="buttons">
                        <span class="button-yes" id="add-edu-submit">Add</span>
                        <span class="button-no" id="add-edu-cancel">Cancel</span>
                    </div>
                </div>
                <div class="zigzag-pop"></div>
            </div>
        </div>

        <div class="pop popupadd-org">
            <div class="pop-grid">
                <div class="pop-content">
                    <div class="pop-content-text">ADD NEW ORGANIZATION</div>
                    <form id="add-org">
                        <div class="pop-desc">Name:</div>
                        <input type="text" id="org-name" placeholder="name"> 
                        <div class="pop-desc">Position:</div>
                        <input type="text" id="org-position" placeholder="position"> 
                        <div class="pop-desc">Year started:</div>
                        <input type="number" id="org-year-start" placeholder="year started"> 
                        <div class="pop-desc">Year ended:</div>
                        <input type="number" id="org-year-end" placeholder="year ended"> 
                    </form>
                    <div class="buttons">
                        <span class="button-yes" id="add-org-submit">Add</span>
                        <span class="button-no" id="add-org-cancel">Cancel</span>
                    </div>
                </div>
                <div class="zigzag-pop"></div>
            </div>
        </div>

        <div class="pop popflow popupdelete-w">
            <div class="pop-grid">
                <div class="pop-content">
                    <div class="pop-content-text">SELECT WORK TO DELETE</div>
                    <div class="popflow-content delete-w-content"></div>
                    <div class="buttons">
                        <span class="button-no" id="del-w-back">Back</span>
                    </div>
                </div>
                <div class="zigzag-pop"></div>
            </div>
        </div>

        <div class="pop popflow popupdelete-edu">
            <div class="pop-grid">
                <div class="pop-content">
                    <div class="pop-content-text">SELECT EDUCATION TO DELETE</div>
                    <div class="popflow-content delete-edu-content"></div>
                    <div class="buttons">
                        <span class="button-no" id="del-edu-back">Back</span>
                    </div>
                </div>
                <div class="zigzag-pop"></div>
            </div>
        </div>

        <div class="pop popflow popupdelete-org">
            <div class="pop-grid">
                <div class="pop-content">
                    <div class="pop-content-text">SELECT ORGANIZATION TO DELETE</div>
                    <div class="popflow-content delete-org-content"></div>
                    <div class="buttons">
                        <span class="button-no" id="del-org-back">Back</span>
                    </div>
                </div>
                <div class="zigzag-pop"></div>
            </div>
        </div>

        <div class="pop popflow popupedit-others">
            <div class="pop-grid">
                <div class="pop-content">
                    <div class="pop-content-text">EDIT ABOUT ME & CONTACT LINKS</div>
                    <div class="pop-desc">About Me Description:</div>
                    <textarea id="edit-about-me"></textarea>
                    <form id="edit-links">
                        <div class="pop-desc">Github link:</div>
                        <input type="text" id="edit-github" placeholder="github url"> 
                        <div class="pop-desc">Twitter link:</div>
                        <input type="text" id="edit-twitter" placeholder="twitter url"> 
                        <div class="pop-desc">LinkedIn link:</div>
                        <input type="text" id="edit-linkedin" placeholder="linkedin url"> 
                    </form>
                    <div class="buttons">
                        <span class="button-yes" id="edit-others-submit">Save</span>
                        <span class="button-no" id="edit-others-cancel">Cancel</span>
                    </div>
                </div>
                <div class="zigzag-pop"></div>
            </div>
        </div>




        <!-- The core Firebase JS SDK is always required and must be listed first -->
        <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-app.js"></script>

        <!-- TODO: Add SDKs for Firebase products that you want to use
            https://firebase.google.com/docs/web/setup#available-libraries -->
        <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-firestore.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-auth.js"></script>

        <script>
           

            
            //READ DATA
/*            db.collection("educations").get().then(function(snapshot) {
                snapshot.forEach(function(doc){
                    console.log(doc.data());
                })
            });
            */

            //ADD DATA
/*            var newObject = {
                name: "IEEE",
                position: "Member",
                year_start: 2014,
                year_end: 2020
            }

            db.collection("organizations").add(newObject).then(function(doc){
                console.log("Item added with the uid: " + doc.id);
            })
            */
            
            //DELETE DATA
/*            db.collection("organizations").doc("1q5swCBGfC8bVte0GDKa").delete().then(function(){
                console.log("Item deleted");
            }).catch(function(err){
                console.log("error in deleting item: " + err);
            });
            */

           
            var firebaseConfig = {
                apiKey: "AIzaSyDXaG8Ud8BEP-VkzxSs_KGU3fpPFt0H28I",
                authDomain: "ccapdev-resume-f3192.firebaseapp.com",
                databaseURL: "https://ccapdev-resume-f3192.firebaseio.com",
                projectId: "ccapdev-resume-f3192",
                storageBucket: "ccapdev-resume-f3192.appspot.com",
                messagingSenderId: "738162282329",
                appId: "1:738162282329:web:dd1ee268c690e6a5f38648"
            };
                
                // Initialize Firebase
            var defaultProject = firebase.initializeApp(firebaseConfig);
                
            function showdbcontent(){
                var db = firebase.firestore();
                $("div.work").empty();
                $("div.education-years").empty();
                $("div.education-content").empty();
                $("div.organization").empty();
                $("div.about-me").empty();
                
                db.collection("works").orderBy("year_created").get().then(function(snapshot) {
                    snapshot.forEach(function(doc){
                        var wArticle = document.createElement("article");
                        var wPhoto = document.createElement("img");

                        var wName = document.createElement("div");
                        var wYearCreated = document.createElement("div");
                        var wLanguage = document.createElement("div");
                        var wDesc = document.createElement("div");

                        $(wPhoto).attr("src", doc.data().img_url);
                        $(wName).text(doc.data().name);
                        $(wYearCreated).text(doc.data().year_created);
                        $(wLanguage).text(doc.data().language);
                        $(wDesc).text(doc.data().desc);

                        $(wArticle).addClass("w")
                        $(wPhoto).addClass("w-photo")
                        $(wName).addClass("w-name")
                        $(wYearCreated).addClass("w-year-created")
                        $(wLanguage).addClass("w-language")
                        $(wDesc).addClass("w-desc")

                        $(wArticle).append(wPhoto);
                        $(wArticle).append(wName);
                        $(wArticle).append(wYearCreated);
                        $(wArticle).append(wLanguage);
                        $(wArticle).append(wDesc);

                        $("div.work").append(wArticle);
                    })
                });

                db.collection("educations").orderBy("year_start").get().then(function(snapshot) {
                    snapshot.forEach(function(doc){
                        var eduArticle = document.createElement("article");

                        var eduDegree = document.createElement("div");
                        var eduSchool = document.createElement("div");
                        var eduYearStart = document.createElement("div");
                        var eduYearEnd = document.createElement("div");
                        var eduType = document.createElement("div");

                        $(eduDegree).text(doc.data().degree);
                        $(eduSchool).text(doc.data().school);
                        $(eduYearStart).text(doc.data().year_start);
                        $(eduYearEnd).text(doc.data().year_start+"-"+doc.data().year_end);
                        $(eduType).text("("+doc.data().type+")");

                        $(eduArticle).addClass("edu")
                        $(eduArticle).attr('id', doc.data().year_start+"article")
                        $(eduDegree).addClass("edu-degree")
                        $(eduSchool).addClass("edu-school")
                        $(eduYearStart).attr('id', doc.data().year_start)
                        $(eduYearStart).addClass("edu-year-start")
                        $(eduYearEnd).addClass("edu-year-end")
                        $(eduType).addClass("edu-type")

                        $(eduArticle).append(eduYearEnd);
                        $(eduArticle).append(eduDegree);
                        $(eduArticle).append(eduSchool);
                        $(eduArticle).append(eduType);

                        $("div.education-years").append(eduYearStart);

                        $("div.education-content").append(eduArticle);      
                    })

                    var i = 0;
                    var yearids = [];  
                    $(".edu-year-start").each(function(){
                        yearids[i++] =  this.id;
                    });

                    let temp = 0;
                    $("#"+yearids[temp]).css("color", "rgb(237, 77, 59)")
                    $("#"+yearids[temp]+"article").css("display","block")

                    $(".edu-year-start").click(function(){
                        $("#"+yearids[temp]).css("color", "")
                        for(x=0;x<yearids.length;x++){
                            if(yearids[x] == this.id){
                                $("#"+yearids[temp]+"article").fadeToggle(200)
                                temp = x;
                                $("#"+yearids[temp]+"article").delay(200).fadeToggle(500)
                            }
                        }
                        $("#"+yearids[temp]).css("color", "rgb(237, 77, 59)")
                    })

                });

                db.collection("organizations").orderBy("year_start").get().then(function(snapshot) {
                    snapshot.forEach(function(doc){
                        var orgArticle = document.createElement("article");

                        var orgName = document.createElement("div");
                        var orgPosition = document.createElement("div");
                        var orgYear = document.createElement("div");

                        $(orgName).text(doc.data().name);
                        $(orgPosition).text(doc.data().position);
                        $(orgYear).text(doc.data().year_start+"-"+doc.data().year_end);

                        $(orgArticle).addClass("org")
                        $(orgName).addClass("org-name")
                        $(orgPosition).addClass("orange")
                        $(orgYear).addClass("org-year")

                        $(orgArticle).append(orgName);
                        $(orgArticle).append(orgPosition);
                        $(orgArticle).append(orgYear);

                        $("div.organization").append(orgArticle);

                        var i = 0;
                        $("article.org").each(function(){
                            $(orgName).attr("id","orgname"+i)
                            $(orgYear).attr("id","orgyear"+i)
                            $(orgArticle).attr("id","orgarticle"+i)
                            i++
                        });
                    })
                    
                    var i = 0;
                    var nameids = [];  
                    $(".org-name").each(function(){
                        nameids[i++] =  this.id; 
                    });

                    i=0;
                    var yearids = [];  
                    $(".org-year").each(function(){
                        yearids[i++] =  this.id; 
                    });

                    i=0;
                    var orgids = [];  
                    $("article.org").each(function(){
                        orgids[i++] =  this.id; 
                    });

                    let temp;

                    //source: https://stackoverflow.com/questions/29072284/jquery-how-to-make-change-margin-left-of-an-element-smoothly
                    $("article.org").hover(function(){
                        for(x=0;x<orgids.length;x++){
                            if(orgids[x] == this.id){
                                temp=x;
                            }
                        }
                        $("#"+nameids[temp]).animate({'margin-bottom': '5'}, 100);
                        $("#"+yearids[temp]).animate({'margin-top': '5'}, 100);
                    }, function(){
                        $("#"+nameids[temp]).animate({'margin-bottom': '0'}, 100);
                        $("#"+yearids[temp]).animate({'margin-top': '0'}, 100);
                    });

                });

                db.collection("others").get().then(function(snapshot) {
                    snapshot.forEach(function(doc){
                        var about = document.createElement("div");
                        var github = document.createElement("a");
                        var twitter = document.createElement("a");
                        var linkedin = document.createElement("a");

                        $(about).text(doc.data().desc);

                        $(github).attr("href", doc.data().github);
                        $(twitter).attr("href", doc.data().twitter);
                        $(linkedin).attr("href", doc.data().linkedin);

                        $("div.about-me").append(about);
                        $("div.github-link").wrap(github);
                        $("div.twitter-link").wrap(twitter);
                        $("div.linkedin-link").wrap(linkedin);
                    })
                });
            };
        </script>


    </body>
</html>